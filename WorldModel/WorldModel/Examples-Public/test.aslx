<asl version="500">
  
  <!--
  Here's a basic example of some Quest 5.0 functionality. Interesting things to note are:
  
    - You can choose your own buttons for the panes on the right, by setting a "displayverbs" list property.
    - Rooms and objects are the same thing. The cupboard is an example of an object which is also a room,
      as you can go inside it.
    - You can modify the default text defined in English.aslx by overriding it with your template tags.
    - You can run the walkthrough specified at the end of this file by clicking Tools, Walkthrough. This
      allows you to automatically test games.
  -->
  
  <include ref="English.aslx"/>
  <include ref="Core.aslx"/>
  <template name="YouAreIn">You're in</template>
  <template name="UnresolvedObject">There's nothing of that name here.</template>
  
  <type name="edible">
    <eat>It looks delicious, but you're feeling a bit full right now.</eat>
    
    <!-- Square brackets allows us to use template-defined text anywhere. We could just
         as easily have used "Look at; Take; Eat" for the displayverbs list though. -->
    <displayverbs type="list">[LookAt];[Take];Eat</displayverbs>
  </type>

  <game name="Test Game"/>

  <object name="lounge">
    <object name="player">
      <inherit name="defaultplayer"/>
    </object>
    <prefix>the</prefix>
    <object name="sofa">
      <prefix>a</prefix>
      <look>Just a sofa.</look>
      <alt>settee; chair</alt>
      <speak>Hi there, I'm a sofa!</speak>
      <sit>It looks comfy, but there are more important things to be doing.</sit>
    </object>

    <object name="apple">
      <inherit name="edible"/>
      <take/>
    </object>

    <object name="newspaper">
      <take/>
      <prefix>a</prefix>
      <look>A copy of The Times.</look>
      <use type="script">
        msg("There are no flies to swat with this.")
      </use>
      <speak type="script">
        msg("You talk to the newspaper.")
        msg("Uh, it doesn't seem to be listening.")
      </speak>
      <eat>There's not a lot of nutritional value in the paper.</eat>
    </object>

    <object name="table">
      <inherit name="surface"/>
      <look type="script">
        if (Got(newspaper)) {
          msg("It's a table, and you have the newspaper by the way!")
        }
        else {
          msg ("It's a table, and you don't have the newspaper.")
        }
      </look>
      
      <object name="lamp">
        <take type="script">
          msg ("The lamp is too heavy to lift.")
        </take>
      </object>
      
    </object>

    <exit alias="east" to="hall"/>
    <exit alias="cupboard" to="cupboard">
      <prefix>into the</prefix>
    </exit>

    <object name="cupboard">
      <descprefix>You are inside the</descprefix>
      <exit alias="out" to="lounge"/>
      <object name="coat"/>
      <look>An ordinary cupboard. I wonder what's inside?</look>
      
      <object name="man">
        <inherit name="male"/>
        <look>Just some bloke, who looks rather perturbed by your sudden intrusion. But I'm sure it's nothing to be worried about.</look>
        <speak>He doesn't look like the talky type. He just looks like he'd rather you got out of his cupboard.</speak>
        <prefix type="string">a scary-looking</prefix>
      </object>
      
      <description>It's a bit cosy in here.</description>
    </object>

  </object>

  <object name="hall">
    <prefix>the</prefix>
    <exit alias="up" to="upstairs"/>
    <exit alias="east" to="kitchen"/>
    <exit alias="west" to="lounge"/>
    <firstenter type="script">
      msg ("Hello. It's the first time you've entered the hall.")
    </firstenter>

    <object name="phone">
      <alt>telephone</alt>
    </object>

    <command name="dial">
      <pattern>dial #text#; call #text#</pattern>
      <script type="script">
        if (IsNumeric(Replace(text, " ", ""))) {
          msg ("You dial '" + text + "', but nobody answers.")
        }
        else {
          msg ("You can only dial numbers.")
        }
      </script>
    </command>
    
  </object>

  <object name="upstairs">
    <descprefix>You are standing</descprefix>
    <exit alias="down" to="hall"/>
  </object>

  <object name="kitchen">
    <prefix>the</prefix>
    <object name="sink">
      <look>Just an ordinary sink.</look>
    </object>

    <object name="cup">
      <lookcount type="int">0</lookcount>
      <look type="script">
        cup.lookcount = cup.lookcount+1
        msg ("It's just a boring cup. You have looked at it " + cup.lookcount + " times.")
      </look>
    </object>
    
    <exit alias="west" to="hall"/>

    <object name="bleach">
      <displayverbs type="list">Look at;Drink</displayverbs>
      <look>A big blue bottle of Domestos Bleach. An appetising beverage?</look>
      <drink type="script">
        msg ("You drink the bleach. That was unfortunate, because you are now dead.")
        finish
      </drink>
    </object>

    <object name="bacon">
      <cook>Although it's tempting to rustle up a lovely bacon sandwich, there's just no time for that now.</cook>
    </object>

    <verb name="cook">
      <pattern>cook; heat</pattern>
      <property>cook</property>
      <defaulttext>You can't cook that!</defaulttext>
    </verb>
    
  </object>

  <walkthrough name="walkthrough">
    <steps>
      x sofa
      eat food
      x table
      speak to news
      take news
      use news
      eat food
      x table
      go to cup
      x sofa
      out
      e
      w
      e
      u
      d
      e
      x sink
      x cup
      x cup
      x cup
      x cup
      drink bleach
    </steps>
  </walkthrough>
    
</asl>